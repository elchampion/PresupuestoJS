<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="./css/estilos.css">
    <title>Presupuesto</title>
</head>

<body>


    <script>


        let egresos = { Renta: 900, Ropa: 400 }; //objeto
        let ingresos = { Quincena: 9000, Venta: 400 }; //objeto
        

        const totalIngresos = () => {
            let totalIngresos = 0;
            //Itera el objeto ingresos en un ciclo for of. Recuerda que es necesario declarar la variable ingreso para poder iterar
            for (let ingreso in ingresos) {
                totalIngresos += ingresos[ingreso];
                //console.log("la propiedad " + ingreso + " contiene " + ingresos[ingreso]);
            }
            return totalIngresos;
        }


        const totalEgresos = () => {
            let totalEgresos = 0;
            for (let egreso in egresos) {
                totalEgresos += egresos[egreso];
            }
            return totalEgresos;
        }

        //var presupuesto = totalIngresos() - totalEgresos(); // poner los paréntesis es ejecutar la función, si no, es como poner una declaración de la fn
        //var porcentajeEgreso = totalEgresos() / totalIngresos();


        const cargarCabecero = () => {
            var presupuesto = totalIngresos() - totalEgresos(); // poner los paréntesis es ejecutar la función, si no, es como poner una declaración de la fn
            var porcentajeEgreso = totalEgresos() / totalIngresos();
            console.log(formatoMoneda(totalIngresos()));
            console.log(formatoMoneda(totalEgresos()));
            console.log("el presupuesto es disponible es " + formatoMoneda(presupuesto));
            console.log("el porcentaje del egreso es " + formatoPorcentaje(porcentajeEgreso));
            //
            //
        }

        // una función que recibe "un número" / "numeros" , les aplica un formato de Moneda y los regresa

        const formatoMoneda = (numero) => {
            //validaciones 
            return numero.toLocaleString('en-US', { style: "currency", currency: "MXN", minimumIntegerDigits: 2 });  //toLocal es un metodo
        }

//https://www.techonthenet.com/js/number_tolocalestring.php#:~:text=In%20JavaScript%2C%20toLocaleString()%20is,its%20value%20as%20a%20string.

        const formatoPorcentaje = (numero) => {
            //validaciones
            return numero.toLocaleString('en-US', { style: "percent", minimumFractionDigits: 2 }); //método o función de un objeto

        }

// una función como propiedad de un objeto, es un método o función de un objeto
//una función por si sola, es solo una función

    </script>

    <div class="cabecero">

        <div class="presupuesto">

            <div class="presupuesto_titulo">Presupuesto disponible</div>
            <div class="presupuesto_valor">+2,000</div>

            <div class="presupuesto_ingreso limpiarEstilos">

                <div class="presupuesto_ingreso--texto">Ingresos</div>
                <div class="derecha">
                    <div class="presupuesto_ingreso--valor">+4,000</div>
                    <div class="presupuesto_ingreso--porcentaje"><br></div>
                </div>

            </div>

            <div class="presupuesto_egreso limpiarEstilos">
                <div class="presupuesto_egreso--texto">Egresos</div>
                <div class="derecha limpiarEstilos">
                    <div class="presupuesto_egreso--valor">-1,900</div>
                    <div class="presupuesto_egreso--porcentaje">45%</div>

                </div>
            </div>

        </div> <!-- escribir div.presupuesto-->

    </div>


    <form id="forma">
        <div class="agregar">
            <div class="agregar_contenedor">

                <select id="tipo" class="agregar_tipo">
                    <option value="ingreso" selected>+</option>
                    <option value="egreso">-</option>
                </select>
                <input type="text" class="agregar_descripcion" id="descripcion" placeholder="Agregar Descripción">
                <input type="text" class="agregar_valor" step="any">
                <button class="agregar_btn"> <ion-icon name="checkmark-circle-outline"></ion-icon></button>
            </div>

        </div>
    </form>


    <div class="contenedor limpiarEstilos">

        <div class="ingreso">

            <h2 class="ingreso_titulo">Ingresos</h2>

            <div class="lista-ingresos">

                <div class="elemento limpiarEstilos">

                    <div class="elemento_descripcion">salario</div>

                    <div class="derecha limpiarEstilos">
                        <div class="elemento_valor">+2200,00 MXN</div>
                        <div class="elemento_eliminar">
                            <button class="elemento_eliminar--btn">
                                <!-- nombre incorrecto en la sintaxis del PDF, nombre correcto en el CSS-->
                                <ion-icon name="close-circle-outline"></ion-icon>
                            </button>
                        </div>

                    </div>
                </div>


                <div class="elemento limpiarEstilos">
                    <div class="elemento_descripcion">Venta Coche</div>
                    <div class="derecha limpiarEstilos">

                        <div class="elemento_valor">+1500,00 MXN</div>
                        <div class="elemento_eliminar">
                            <button class="elemento_eliminar--btn">
                                <ion-icon name="close-circle-outline"></ion-icon>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>



        <div class="egreso">

            <h2 class="egreso_titulo">Egresos</h2>

            <div class="lista-egresos">

                <div class="elemento limpiarEstilos">

                    <div class="elemento_descripcion">Renta departamento</div>
                    <div class="derecha limpiarEstilos">

                        <div class="elemento_valor">-900,00 MXN</div>
                        <div class="elemento_porcentaje">21%</div>
                        <div class="elemento_eliminar">
                            <button class="elemento_eliminar--btn">
                                <ion-icon name="close-circle-outline"></ion-icon>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="elemento limpiarEstilos">
                <div class="elemento_descripcion">Ropa</div>
                <div class="derecha limpiarEstilos">
                    <div class="elemento_valor">-400,00 MXN</div>
                    <div class="elemento_porcentaje">9%</div>
                    <div class="elemento_eliminar">
                        <button class="elemento_eliminar--btn">
                            <ion-icon name="close-circle-outline"></ion-icon>
                        </button>
                    </div>
                </div>
            </div>

        </div>

    </div>


    <script type="module" src="https://unpkg.com/ionicons@5.4.0/dist/ionicons/ionicons.esm.js"></script>
    <!--PDF incorrecto, hay un punto de "más" (el último punto) en el link de la página 4-->



</body>

</html>